<!DOCTYPE html>
<html>
<head>
  <style>
    * {padding:0;margin:0;box-sizing:border-box;}
    html, body, #editor {width:100%;height:100%;}
  </style>
<script>
  require("ace-min-noconflict");

  let editor;
  window.addEventListener("DOMContentLoaded", () => {
      editor = ace.edit("editor");
      editor.$blockScrolling = Infinity; // Warning 対策
      if (process.platform == "darwin") {
          editor.command.bindkey("Ctrl-P", "colineup");
      }
      document.body.addEventListener('dragover', e => {e.preventDefault();} );
      document.body.addEventListener('drop'    , e => {
          e.preventDefault();
          if (e.dataTransfer.files[0]) {
              let file = e.dataTransfer.files[0].path;
              if (/\.[kn]sl$/.test(file)) {
                  open(file);
              }
          }
      });
  });
  function openFile(file) {
      require('fs').readFile(file, 'utf8', (err, data) => {editor.setValue(data, -1);})
  }
</script>
</head>
<body>
  <div id="editor"></div>
</body>
</html>

